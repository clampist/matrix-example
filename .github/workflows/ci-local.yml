name: CI - Local
on:
  push:
    branches: [feature/**, bugfix/**]

jobs:
  build:
    uses: ./.github/workflows/build.yml

  ut:
    needs: build
    runs-on: ubuntu-latest
    timeout-minutes: 10
    continue-on-error: true
    steps:
      - run: bash scripts/ut.sh

  integration-test:
    needs: build
    runs-on: ubuntu-latest
    timeout-minutes: 15
    continue-on-error: true
    steps:
      - run: bash scripts/integration_test.sh

  p0-backend:
    needs: build
    runs-on: ubuntu-latest
    timeout-minutes: 20
    continue-on-error: true
    steps:
      - run: bash scripts/p0_backend.sh

  smart-cases:
    needs: build
    runs-on: ubuntu-latest
    timeout-minutes: 20
    continue-on-error: true
    steps:
      - run: bash scripts/smart_cases.sh

  new-cases:
    needs: build
    runs-on: ubuntu-latest
    timeout-minutes: 20
    continue-on-error: true
    steps:
      - run: bash scripts/new_cases.sh

  formatting:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    continue-on-error: true
    steps:
      - run: bash scripts/format_check.sh

  security:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    continue-on-error: true
    steps:
      - run: bash scripts/security_scan.sh

  sonar:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    continue-on-error: true
    steps:
      - run: bash scripts/sonar_scan.sh